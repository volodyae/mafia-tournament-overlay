<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–≤–µ—Ä–ª–µ–π –°–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –ú–∞—Ñ–∏–∏ - –ü—Ä–æ—Ç–æ—Ç–∏–ø</title>
    <style>
        :root {
            /* –¶–≤–µ—Ç–∞ –∫–æ–º–∞–Ω–¥ */
            --red-team-bg: linear-gradient(135deg, #DC2626 0%, #991B1B 100%);
            --black-team-bg: linear-gradient(135deg, #1F2937 0%, #111827 100%);
            --red-team-solid: #DC2626;
            --black-team-solid: #1F2937;
            --red-underline: #DC2626;
            --black-underline: #1F2937;
            
            /* –¶–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ */
            --text-primary: #FFFFFF;
            --text-secondary: #E5E7EB;
            --text-muted: #9CA3AF;
            
            /* –ë–∞–∑–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è 1920x1080 */
            --base-card-width: 150px;
            --base-card-height: 180px;
            --base-font-size: 16px;
            --base-spacing: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Oswald', -apple-system, sans-serif;
            background: transparent;
            overflow: hidden;
            color: var(--text-primary);
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è */
        .overlay-container {
            width: 1920px;
            height: 1080px;
            position: relative;
            transform-origin: top left;
        }

        /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ */
        @media (min-width: 2560px) and (min-height: 1440px) {
            .overlay-container {
                transform: scale(1.333); /* 2K: 2560/1920 */
            }
        }

        @media (min-width: 3840px) and (min-height: 2160px) {
            .overlay-container {
                transform: scale(2); /* 4K: 3840/1920 */
            }
        }

        /* –õ–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ */
        .info-block-left {
            position: absolute;
            top: 10px;
            left: 20px;
            background: transparent;
            padding: 16px;
            min-width: 320px;
        }

        .top-info-row {
            display: flex;
            gap: 120px;
            margin-bottom: 11px;
        }

        .best-move {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .best-move-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .best-move-players {
            display: flex;
            gap: 11px;
            align-items: center;
        }

        .best-move-player {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .best-move-number {
            font-size: 16px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            min-width: 27px;
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .best-move-number.team-red {
            background: var(--red-team-solid);
            color: white;
        }

        .best-move-number.team-black {
            background: var(--black-team-solid);
            color: white;
        }

        .role-icon {
            font-size: 16px;
            font-weight: 600;
            display: none; /* –°–∫—Ä—ã—Ç—ã –∏–∫–æ–Ω–∫–∏ —Ä–æ–ª–µ–π –≤ –õ–• –∏ —Ç–∞–±–ª–∏—Ü–µ */
        }

        .nominees {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nominees-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            text-transform: uppercase;
        }

        .nominees-list {
            display: flex;
            gap: 11px;
            align-items: center;
        }

        .nominee-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nominee-number {
            font-size: 16px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            min-width: 27px;
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .nominee-number.team-red {
            background: var(--red-team-solid);
            color: white;
        }

        .nominee-number.team-black {
            background: var(--black-team-solid);
            color: white;
        }

        /* –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .rounds-table {
            border-collapse: collapse;
            table-layout: fixed;
            width: auto;
        }

        .rounds-table th {
            padding: 2px 0;
            text-align: center;
            font-size: 11px;
            font-weight: 600;
            color: var(--text-primary);
            opacity: 0.6;
            width: 32px;
        }

        .rounds-table th:first-child {
            width: 28px;
            padding-right: 8px;
        }

        .rounds-table td {
            padding: 3px 0;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            width: 32px;
        }

        .rounds-table td:first-child {
            width: 28px;
            padding-right: 8px;
        }

        .rounds-table .action-icon {
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .round-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .round-number {
            font-size: 14px;
            font-weight: 700;
            padding: 2px 4px;
            border-radius: 4px;
            min-width: 20px;
            text-align: center;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .round-number.team-red {
            background: var(--red-team-solid);
            color: white;
        }

        .round-number.team-black {
            background: var(--black-team-solid);
            color: white;
        }

        /* –ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ */
        .info-block-right {
            position: absolute;
            top: 10px;
            right: 20px;
            background: transparent;
            padding: 16px;
            text-align: center;
        }

        .series-info {
            margin-bottom: 8px;
        }

        .series-name {
            font-size: 30px;
            font-weight: 600;
            color: var(--text-primary);
            opacity: 0.7;
            text-transform: uppercase;
        }

        .game-info {
            font-size: 30px;
            font-weight: 600;
            text-align: right;
            opacity: 0.7;
            margin-top: 0px;
            color: var(--text-primary);
        }

        .game-current {
            color: var(--text-primary);
            font-size: 30px;
            font-weight: 600;
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .bottom-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            padding: 20px;
            gap: 8px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä–æ–∫–∞ */
        .player-card {
            width: 150px;
            height: 180px;
            position: relative;
            border-radius: 12px;
            overflow: visible;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        }

        .player-card.team-red {
    background: var(--red-team-bg);
}

.player-card.team-black {
    background: var(--black-team-bg);
}

.player-card.team-red.sheriff {
    background: linear-gradient(135deg, #EAB308 0%, #CA8A04 100%);
}


        .player-card.eliminated {
            transform: translateY(20px);
            opacity: 0.5;
            filter: grayscale(100%);
        }

        /* –†–æ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É */
        .role-badge {
            position: absolute;
            top: -12px;
            right: 0px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 23px;
            font-weight: 700;
            width: 35px;
            height: 44px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            border: 2px solid rgba(255, 255, 255, 0.3);
            line-height: 1;
            padding-bottom: 3px;
        }

        /* –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏—á–∏–Ω—ã –≤—ã–±—ã—Ç–∏—è */
        .elimination-icon {
            position: absolute;
            top: -12px;
            left: 0px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            border: 2px solid #DC2626;
        }

        /* –ü–æ—Ä—Ç—Ä–µ—Ç –∏–≥—Ä–æ–∫–∞ */
        .player-portrait {
            width: 100%;
            height: 130px;
            object-fit: cover;
            object-position: center top;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–¥ –ø–æ—Ä—Ç—Ä–µ—Ç–æ–º */
        .player-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.8) 70%, transparent 100%);
            padding: 32px 8px 8px 8px;
            text-align: center;
        }

        .player-number {
            font-size: 18px;
            font-weight: 700;
            width: 20px;
            flex-shrink: 0;
            text-align: left;
        }

        .player-nickname {
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .player-nickname-text {
            flex: 1;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* –õ–æ–≥–æ—Ç–∏–ø —Ç—É—Ä–Ω–∏—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
        .tournament-logo {
            width: 100px;
            height: 100px;
            margin-right: 12px;
            display: none; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç */
        }

        .tournament-logo.visible {
            display: block;
        }

        .tournament-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .animate-in {
            animation: fadeInUp 0.6s ease-out;
        }

        /* –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ —Ñ–æ—Ç–æ */
        .player-placeholder {
            width: 100%;
            height: 130px;
            background: linear-gradient(135deg, #374151 0%, #1F2937 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #6B7280;
        }
    </style>
</head>
<body>
    <div class="overlay-container">
        <!-- –õ–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ -->
        <div class="info-block-left animate-in">
            <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞: –õ–• –∏ –í—ã—Å—Ç–∞–≤–ª–µ–Ω—ã -->
            <div class="top-info-row">
                <!-- –õ—É—á—à–∏–π —Ö–æ–¥ -->
                <div class="best-move">
                    <div class="best-move-title">–õ–•:</div>
                    <div class="best-move-players">
                        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>

                <!-- –í—ã—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ -->
                <div class="nominees">
                    <div class="nominees-title">–í—ã—Å—Ç–∞–≤–ª–µ–Ω—ã:</div>
                    <div class="nominees-list">
                        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>

            <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
            <table class="rounds-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                        <th>6</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </tbody>
            </table>
        </div>

        <!-- –ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ -->
        <div class="info-block-right animate-in">
            <div class="series-info">
                <div class="series-name">–°–ï–†–ò–Ø</div>
            </div>
            <div class="game-info">
                –ò–ì–†–ê <span class="game-current">1</span> / 5
            </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤ -->
        <div class="bottom-panel">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
    </div>

    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
    <script>
        // –ü–æ–ª—É—á–∞–µ–º gameId –∏–∑ URL
        const urlParams = new URLSearchParams(window.location.search);
        const gameId = urlParams.get('gameId');

        if (!gameId) {
            console.error('gameId not provided in URL');
            document.body.innerHTML = '<div style="color: white; text-align: center; padding: 50px; font-size: 24px;">‚ùå Game ID not found</div>';
        }

        let gameData = null;
        let socket = null;

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
        function scaleOverlay() {
            const container = document.querySelector('.overlay-container');
            const baseWidth = 1920;
            const baseHeight = 1080;
            
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            
            const scaleX = screenWidth / baseWidth;
            const scaleY = screenHeight / baseHeight;
            const scale = Math.min(scaleX, scaleY);
            
            container.style.transform = `scale(${scale})`;
            
            const scaledWidth = baseWidth * scale;
            const scaledHeight = baseHeight * scale;
            const offsetX = (screenWidth - scaledWidth) / 2;
            const offsetY = (screenHeight - scaledHeight) / 2;
            
            container.style.left = `${offsetX}px`;
            container.style.top = `${offsetY}px`;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        async function loadGameData() {
    try {
        const response = await fetch(`http://localhost:3000/api/games/${gameId}`);
        gameData = await response.json();

        console.log('Game data loaded:', gameData);
        renderOverlay();
    } catch (error) {
        console.error('Error loading game data:', error);
    }
}


        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–≤–µ—Ä–ª–µ—è
function renderOverlay() {
    if (!gameData || !gameData.seating) return;

    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤—ã–π –±–ª–æ–∫ (—Å–µ—Ä–∏—è –∏ –Ω–æ–º–µ—Ä –∏–≥—Ä—ã)
    document.querySelector('.series-name').textContent = gameData.tournament_name || gameData.series_name || '–°–ï–†–ò–Ø';
    document.querySelector('.game-current').textContent = gameData.game_number;
    
    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–≥—Ä–æ–∫–æ–≤
    const bottomPanel = document.querySelector('.bottom-panel');
    bottomPanel.innerHTML = gameData.seating.map(seat => {
        const isEliminated = seat.is_eliminated;
        const team = seat.team === 'red' ? 'team-red' : 'team-black';
        const sheriffClass = seat.role === 'sheriff' ? 'sheriff' : '';
        const roleLabel = getRoleLabel(seat.role);
        const eliminationIcon = seat.elimination_reason === 'voted' ? 'üëç' : 'üî´';

        return `
            <div class="player-card ${team} ${sheriffClass} ${isEliminated ? 'eliminated' : ''}">
                ${isEliminated ? `<div class="elimination-icon">${eliminationIcon}</div>` : ''}
                ${roleLabel ? `<div class="role-badge">${roleLabel}</div>` : ''}
                ${seat.photo_url 
                    ? `<img src="${seat.photo_url}" alt="${seat.nickname}" class="player-portrait" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                       <div class="player-placeholder" style="display:none;">üë§</div>`
                    : `<div class="player-placeholder">üë§</div>`
                }
                <div class="player-info">
                    <div class="player-nickname">
                        <span class="player-number">${seat.position}</span>
                        <span class="player-nickname-text">${seat.nickname}</span>
                    </div>
                </div>
            </div>
        `;
    }).join('');

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –õ–•
    if (gameData.best_move) {
        renderBestMove();
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö
    if (gameData.nominees) {
        renderNominees();
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    if (gameData.rounds) {
        renderRounds();
    }
}


        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ª—É—á—à–µ–≥–æ —Ö–æ–¥–∞
        function renderBestMove() {
            const bm = gameData.best_move;
            const suspects = [bm.suspect_1, bm.suspect_2, bm.suspect_3];
            
            const bestMovePlayersDiv = document.querySelector('.best-move-players');
            bestMovePlayersDiv.innerHTML = suspects.map(playerId => {
                const seat = gameData.seating.find(s => s.player_id === playerId);
                if (!seat) return '';
                
                const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
                return `
                    <div class="best-move-player">
                        <div class="best-move-number ${teamClass}">${seat.position}</div>
                    </div>
                `;
            }).join('');
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö
        function renderNominees() {
    const nomineesList = document.querySelector('.nominees-list');
    
    if (!gameData.nominees || gameData.nominees.length === 0) {
        nomineesList.innerHTML = ''; // –ü—É—Å—Ç–æ, –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
        return;
    }
    
    nomineesList.innerHTML = gameData.nominees.map(nominee => {
        const seat = gameData.seating.find(s => s.player_id === nominee.player_id);
        if (!seat) return '';
        
        const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
        return `
            <div class="nominee-item">
                <div class="nominee-number ${teamClass}">${seat.position}</div>
            </div>
        `;
    }).join('');
}


        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function renderRounds() {
            const tbody = document.querySelector('.rounds-table tbody');
            const maxRounds = 6; // –ú–∞–∫—Å–∏–º—É–º —Å—Ç–æ–ª–±—Ü–æ–≤

            // –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–µ–π—Å—Ç–≤–∏—è
            const actions = ['üî´', 'üé©', '‚≠ê', 'üëç'];
            const rows = actions.map(action => {
                let cells = `<td class="action-icon">${action}</td>`;
                
                for (let i = 0; i < maxRounds; i++) {
                    const round = gameData.rounds[i];
                    if (!round) {
                        cells += '<td></td>';
                        continue;
                    }

                    let content = '';
                    if (action === 'üî´') {
                        if (round.mafia_miss) {
                            content = '<div class="round-number">‚ùå</div>';
                        } else if (round.mafia_kill_player_id) {
                            const seat = gameData.seating.find(s => s.player_id === round.mafia_kill_player_id);
                            const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
                            content = `<div class="round-number ${teamClass}">${seat.position}</div>`;
                        }
                    } else if (action === 'üé©') {
                        if (round.don_check_player_id) {
                            const seat = gameData.seating.find(s => s.player_id === round.don_check_player_id);
                            const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
                            content = `<div class="round-number ${teamClass}">${seat.position}</div>`;
                        } else {
                            content = '<div class="round-number">‚ùå</div>';
                        }
                    } else if (action === '‚≠ê') {
                        if (round.sheriff_check_player_id) {
                            const seat = gameData.seating.find(s => s.player_id === round.sheriff_check_player_id);
                            const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
                            content = `<div class="round-number ${teamClass}">${seat.position}</div>`;
                        } else {
                            content = '<div class="round-number">‚ùå</div>';
                        }
                    } else if (action === 'üëç') {
  if (round.nobody_voted_out) {
    content = '<div class="round-number">‚ùå</div>';
  } else if (round.voted_out_players && round.voted_out_players.length > 0) {
    const firstId = round.voted_out_players[0];
    const seat = gameData.seating.find(s => s.player_id === firstId);
    if (seat) {
      const teamClass = seat.team === 'red' ? 'team-red' : 'team-black';
      content = `<div class="round-number ${teamClass}">${seat.position}</div>`;
    }
  }
}

                    cells += `<td><div class="round-cell">${content}</div></td>`;
                }

                return `<tr>${cells}</tr>`;
            });

            tbody.innerHTML = rows.join('');
        }

        // –ü–æ–ª—É—á–∏—Ç—å –±—É–∫–≤—É —Ä–æ–ª–∏
        function getRoleLabel(role) {
            const labels = {
                'mafia': '–ú',
                'don': '–î',
                'sheriff': '–®',
                'civilian': ''
            };
            return labels[role] || '';
        }

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket
        function connectWebSocket() {
    socket = io('http://localhost:3000');

    socket.on('connect', () => {
        console.log('WebSocket connected');
        socket.emit('join_game', gameId);
    });

    socket.on('game_updated', (data) => {
        console.log('Game update received:', data);
        loadGameData(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
    });

    socket.on('disconnect', () => {
        console.log('WebSocket disconnected');
    });
}


        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('load', () => {
            scaleOverlay();
            loadGameData();
            connectWebSocket();
        });

        window.addEventListener('resize', scaleOverlay);
    </script>
</body>
</html>
